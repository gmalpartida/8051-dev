EXAMP02A        EXAMP02A.ASM                                                                                  JUN-06-22   PAGE 1

                       1    ; EXAMP02A.ASM - Initialze the External Data Ram.
                       2    ; Initialize all 64K of external data ram to a fixed value.
                       3    ; Use the monitor program to write out a message.
                       4    ; Started 06/06/2022
                       5    ;
                       6    $MOD51
                       7    $TITLE(EXAMP02A.ASM)
                       8    $DATE(JUN-06-22)
                       9    $PAGEWIDTH(132)
                      10    $OBJECT(EXAMP02A.HEX);
                      11    ;
  00AA                12    VALUE    EQU   0AAH        ; The value to set all the external data ram.
  001B                13    ESC      EQU   01BH        ; Escape Character.
  000A                14    LF       EQU   10          ; Line Feed.
  000D                15    CR       EQU   13          ; Carrage Return.
  077C                16    WTSTRING EQU   077CH       ; This is where the subroutine is that writes characters.
                      17    ;
0800                  18             ORG   0800H       ; Set the ORG to 0x0800 to start in the user RAM.
                      19    ;
0800 12077C           20             LCALL WTSTRING    ; Write Out a message.
0803 0A0D496E         21                     DB    LF,CR,'Initialize the External Ram.',LF,CR 
0807 69746961   
080B 6C697A65   
080F 20746865   
0813 20457874   
0817 65726E61   
081B 6C205261   
081F 6D2E0A0D   
0823 1B               22             DB    ESC
                      23    ;
0824 900000           24             MOV   DPTR,#0000H ; Initially set the data pointer to 0x0000.
0827 A983             25    LABEL03: MOV   R1,DPH      ; Determine if the DPTR is 0xFFFF to exit the main loop.
0829 AA82             26             MOV   R2,DPL
082B E9               27             MOV   A,R1        ; This is logic to determine when the DPTR is 0xFFFF.
082C 5A               28             ANL   A,R2        ; "A" will be 0xFF only if DPTR is 0xFFFF.
082D F4               29             CPL   A           ; "A" will be 0x00 if DPTR is 0xFFFF.
082E 7002             30             JNZ   LABEL01     ; Jump if not completed setting all of the RAM.
0830 8006             31             SJMP  LABEL02     ; Jump to the Monitor if completed setting all the RAM.
0832 74AA             32    LABEL01: MOV   A,#VALUE    ; Set "A" to the VALUE to be placed in the ram.
0834 F0               33             MOVX  @DPTR,A     ; Load the VALUE in "A" to the External Data Ram. 
0835 A3               34             INC   DPTR        ; Increment the data pointer.
0836 80EF             35             SJMP  LABEL03     ; Go back to the beginning of the main loop.
                      36                               ;
0838 020000           37    LABEL02: LJMP  0000H       ; Jump back to the beginning of the Monitor Program.
                      38             END

VERSION 1.2h ASSEMBLY COMPLETE, 0 ERRORS FOUND
EXAMP02A        EXAMP02A.ASM                                                                                  JUN-06-22   PAGE 2

CR . . . . . . . . . . . . . . .    NUMB  000DH  
DPH. . . . . . . . . . . . . . .  D ADDR  0083H  PREDEFINED  
DPL. . . . . . . . . . . . . . .  D ADDR  0082H  PREDEFINED  
ESC. . . . . . . . . . . . . . .    NUMB  001BH  
LABEL01. . . . . . . . . . . . .  C ADDR  0832H  
LABEL02. . . . . . . . . . . . .  C ADDR  0838H  
LABEL03. . . . . . . . . . . . .  C ADDR  0827H  
LF . . . . . . . . . . . . . . .    NUMB  000AH  
VALUE. . . . . . . . . . . . . .    NUMB  00AAH  
WTSTRING . . . . . . . . . . . .    NUMB  077CH  
