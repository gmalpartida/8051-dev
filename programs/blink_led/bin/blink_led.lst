ASxxxx Assembler V02.00 + NoICE + SDCC mods  (Intel 8051)               Page 1
Hexadecimal [24-Bits]



                                      1 .module blink_led
                                      2 
                                      3 ;.area INTV (ABS)
                                      4 
                                      5 ;.org	0x0000
                                      6 
      000000                          7 RESET:
      000000 02 00 2E         [24]    8 	ljmp main
                                      9 
      000003                         10 .ds 0x08
                                     11 ;.org 	0x000b
      00000B 02 00 46         [24]   12 	ljmp timer_isr
                                     13 
                                     14 ;.area CSEG (ABS, CODE)
                                     15 
                                     16 ;.org 0x0090
      00000E                         17 .ds 0x20
                                     18 
      00002E                         19 main:
                                     20 
      00002E D2 AF            [12]   21 	setb ea				; enable interrupts
      000030 D2 A9            [12]   22 	setb et0			; enable T0 interrupt
      000032 D2 B9            [12]   23 	setb pt0			; set T0 to high priority level
      000034 E5 89            [12]   24 	mov a, tmod
      000036 74 01            [12]   25 	mov a, #0x01
      000038 F5 89            [12]   26 	mov tmod, a
                                     27 
      00003A 75 8C 4C         [24]   28 	mov th0, #0x4c		; set up for 50ms timeout
      00003D 75 8A 00         [24]   29 	mov tl0, #0x00
                                     30 
      000040 74 14            [12]   31 	mov a, #20
      000042 D2 8C            [12]   32 	setb TR0			; turn timer on
                                     33 
      000044 80 FE            [24]   34 	sjmp .
                                     35 
      000046                         36 timer_isr:
                                     37 	
      000046 75 8C 4C         [24]   38 	mov TH0, #0x4c
      000049 75 8A 00         [24]   39   	mov TL0, #0x00
                                     40 	
      00004C C2 8D            [12]   41 	clr tf0
                                     42 
      00004E 14               [12]   43 	dec a				; wait for 20 timeouts, 1 second 
      00004F 70 12            [24]   44 	jnz exit_isr
                                     45 
      000051 B2 90            [12]   46     cpl p1.0
      000053 B2 91            [12]   47 	cpl p1.1
      000055 B2 92            [12]   48 	cpl p1.2
      000057 B2 93            [12]   49 	cpl p1.3
      000059 B2 94            [12]   50 	cpl p1.4
      00005B B2 95            [12]   51 	cpl p1.5
      00005D B2 96            [12]   52 	cpl p1.6
      00005F B2 97            [12]   53 	cpl p1.7
                                     54 
      000061 74 14            [12]   55 	mov a, #20
ASxxxx Assembler V02.00 + NoICE + SDCC mods  (Intel 8051)               Page 2
Hexadecimal [24-Bits]



      000063                         56 exit_isr:
      000063 32               [24]   57 	reti
                                     58 
                                     59 
